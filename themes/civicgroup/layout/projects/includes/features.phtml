<?php
// 1) Define which keys to skip completely
$not_include = [
    'bedrooms',
    'bathrooms',
    'garage',
    'year_built',
    'area',
    'lot_size',
];

// 2) Define keys where value should not be displayed
$no_need_value_include = [
    'swimming_pool',
    'car_parking',
];

// 3) Build a list of valid features
$valid_features = array_filter(
    $project_data['features'],
    function( $value, $key ) use ( $not_include ) {
        return
            ! empty( $value ) &&                     // skip empty
            ! in_array( $key, $not_include, true );  // skip excluded keys
    },
    ARRAY_FILTER_USE_BOTH
);

// 4) Only render if we have at least one
if ( ! empty( $valid_features ) ): ?>
<div class="rh_property__features_wrap margin-bottom-40px" id="features">
    <h4 class="rh_property__heading">
        <?= $project->type === 'land' ? 'Feature & Aminities' : 'Features'; ?>
    </h4>
    <ul class="rh_property__features arrow-bullet-list">
        <?php foreach ( $valid_features as $key => $value ): ?>
        <li class="rh_property__feature">
            <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" xml:space="preserve">
                <path d="M11 .8C16.7.8 21.3 5.4 21.3 11S16.7 21.2 11 21.2C5.3 21.2.8 16.7.8 11S5.3.8 11 .8z"
                    opacity=".3" fill-rule="evenodd" clip-rule="evenodd"></path>
                <path class="rh-ultra-light rh-ultra-stroke-dark"
                    d="M11 .8C16.7.8 21.3 5.4 21.3 11S16.7 21.2 11 21.2C5.3 21.2.8 16.7.8 11S5.3.8 11 .8z"
                    clip-rule="evenodd" fill="none" stroke="#000" stroke-width="1.5"></path>
                <path class="rh-ultra-stroke-dark" d="m5.7 12 3 3 7-8" fill="none" stroke="#000" stroke-width="1.5"
                    stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
            <a
                href="<?= htmlspecialchars( $wo['config']['site_url'] . '/project-feature/' . $key, ENT_QUOTES, 'UTF-8' ); ?>">
                <?= ucwords(str_replace('_', ' ', $key))
                 . (
                      (!in_array($key, $no_need_value_include, true) && ((int)$value > 1))
                        ? " ({$value})"
                        : ''
                   ); ?>
            </a>
        </li>
        <?php endforeach; ?>
    </ul>
</div>
<?php endif; ?>

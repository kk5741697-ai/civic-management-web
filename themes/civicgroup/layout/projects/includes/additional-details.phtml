<?php if (!empty($project_data['additional_details']) && is_array($project_data['additional_details'])): ?>
<div class="rh-property-additional-details-wrapper">
    <h4 class="rh_property__heading rh_property__additional_details">Additional Details</h4>
    <ul class="rh_property__additional margin-bottom-40px clearfix">

        <?php if (! empty($project_data['features']['car_parking'])): 
            // decode any entities in the raw swimming_pool
            $car_parking = html_entity_decode(strip_tags($project_data['features']['car_parking']), ENT_QUOTES|ENT_HTML5, 'UTF-8');
        ?>
        <li style="display: flex;">
            <span class="title" style="flex:1;">Avillable Parking:</span>
            <span class="value" style="flex:1;"><?= $car_parking ?> Cars</span>
        </li>
        <?php endif; ?>
        
        <?php if (! empty($project_data['katha'])): 
            // decode any entities in the raw katha
            $katha = html_entity_decode(strip_tags($project_data['katha']), ENT_QUOTES|ENT_HTML5, 'UTF-8');
        ?>
        <li style="display: flex;">
            <span class="title" style="flex:1;">Land Size:</span>
            <span class="value" style="flex:1;"><?= $katha ?> Katha</span>
        </li>
        <?php endif; ?>
        
        <?php if (! empty($project_data['features']['swimming_pool'])): 
            // decode any entities in the raw swimming_pool
            $swimming_pool = html_entity_decode(strip_tags($project_data['features']['swimming_pool']), ENT_QUOTES|ENT_HTML5, 'UTF-8');
        ?>
        <li style="display: flex;">
            <span class="title" style="flex:1;">Swimming Pool Size:</span>
            <span class="value" style="flex:1;"><?= $swimming_pool ?> SFT</span>
        </li>
        <?php endif; ?>

        <?php if (! empty($project_data['features']['year_built'])): 
            // decode any entities in the raw katha
            $year_built = html_entity_decode(strip_tags($project_data['features']['year_built']), ENT_QUOTES|ENT_HTML5, 'UTF-8');
        ?>
        <li style="display: flex;">
            <span class="title" style="flex:1;">Year Build:</span>
            <span class="value" style="flex:1;"><?= $year_built ?></span>
        </li>
        <?php endif; ?>

        <?php
        // loop through the additional details array
        foreach ($project_data['additional_details'] as $item):
            // skip empty entries
            if (empty($item['key']) || empty($item['value'])) {
                continue;
            }
            // decode HTML entities then strip tags
            $label = html_entity_decode(strip_tags($item['key']),   ENT_QUOTES|ENT_HTML5, 'UTF-8');
            $value = html_entity_decode(strip_tags($item['value']), ENT_QUOTES|ENT_HTML5, 'UTF-8');
        ?>
        <li style="display: flex;">
            <span class="title" style="flex:1;"><?= $label ?>:</span>
            <span class="value" style="flex:1;"><?= $value ?></span>
        </li>
        <?php endforeach; ?>

    </ul>
</div>
<?php endif; ?>